{% extends "master.html" %}
{% load static %}
{% block title %}Donor Dashboard{% endblock %}
{% block content %}

<div class="hospital-dashboard">

  <!-- Header with Welcome and Profile Dropdown -->
  <div class="dashboard-header">
    <div class="welcome-text">
      <h2>Welcome, {{ donor.name }}</h2>
      <p>Manage your blood donation activities and appointments efficiently.</p>
    </div>

    <div class="dropdown">
      {% if donor.profile_pic %}
      <img src="{{ donor.profile_pic.url }}" alt="Profile Picture" class="hospital-logo" id="logoDropdown"
        onclick="toggleDropdown()" />
      {% else %}
      <img src="{% static 'images/default-profile.png' %}" alt="Default Profile" class="hospital-logo" id="logoDropdown"
        onclick="toggleDropdown()" />
      {% endif %}

      <ul class="custom-dropdown shadow" id="dropdownMenu">
        <li><a href="{% url 'donor_profile' %}"><i class="fas fa-user me-2"></i> Profile</a></li>
        <li><hr></li>
        <li>
          <a href="#" class="text-danger" onclick="confirmLogout(event)">
            <i class="fas fa-sign-out-alt me-2"></i> Logout
          </a>
        </li>
      </ul>
    </div>
  </div>

  <!-- Dashboard Action Cards -->
  <div class="hospital-cards">

    <a href="{% url 'donor_appoinment' %}" class="hosp-card">
      <i class="fas fa-calendar-check"></i>
      <h4>Appointment Request</h4>
      <p>Answer quick health questions and submit a donation request.</p>
    </a>

    <a href="{% url 'donation_status' %}" class="hosp-card">
      <i class="fas fa-list-check"></i>
      <h4>Donation Status</h4>
      <p>Track the status of your latest donation request.</p>
    </a>

    <a href="{% url 'donation_history' %}" class="hosp-card">
      <i class="fas fa-book"></i>
      <h4>Donation History</h4>
      <p>View a complete record of your past donations.</p>
    </a>

    <a href="{% url 'donor_camp' %}" class="hosp-card">
      <i class="fas fa-hand-holding-heart"></i>
      <h4>Donation Camps</h4>
      <p>See upcoming and nearby blood donation camps.</p>
    </a>

    <a href="{% url 'view_hospital' %}" class="hosp-card">
      <i class="fas fa-hospital"></i>
      <h4>Hospitals</h4>
      <p>View and connect with registered hospitals.</p>
    </a>

    <a href="{% url 'donor_notifications' %}" class="hosp-card">
      <i class="fas fa-bell"></i>
      <h4>Notifications</h4>
      <p>Stay informed with updates from admin and hospitals.</p>
    </a>

  </div>

</div>

<script>
  function toggleDropdown() {
    const dropdown = document.getElementById("dropdownMenu");
    dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
  }

  document.addEventListener("click", function (event) {
    const dropdown = document.getElementById("dropdownMenu");
    const logo = document.getElementById("logoDropdown");
    if (!logo.contains(event.target) && !dropdown.contains(event.target)) {
      dropdown.style.display = "none";
    }
  });

  function confirmLogout(event) {
    event.preventDefault();
    if (confirm("Are you sure you want to logout?")) {
      window.location.href = "{% url 'logout' %}";
    }
  }
</script>

{% endblock %}
